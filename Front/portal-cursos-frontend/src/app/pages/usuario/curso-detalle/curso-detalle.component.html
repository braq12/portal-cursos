

<div class="p-3">
  <div class="grid justify-content-center">
    <div class="col-12 lg:col-10 xl:col-8">

      <!-- Header del curso -->
      <!-- Header -->
      <p-card styleClass="mb-3 shadow-2 border-round-lg">
        <div class="flex flex-column gap-2">
      
          <!-- Encabezado -->
          <div class="flex justify-content-between align-items-center flex-wrap">
            <div class="flex align-items-center gap-2">
              <h2 class="m-0">{{ curso?.titulo }}</h2>
              <p-tag
                [value]="curso?.estadoCurso"
                [severity]="curso?.estadoCurso === 'COMPLETO' ? 'success' : 'warn'">
              </p-tag>
            </div>
      
            <!-- Barra de progreso -->
            <div class="w-10 md:w-8 lg:w-6">
                <p-progressBar [value]="progreso"></p-progressBar>
                <div class="text-right mt-1 text-500">{{ progreso }}% completado</div>
              </div>
          </div>
      
          <!-- Descripción -->
          <p class="text-700 line-height-3 m-0">{{ curso?.descripcion }}</p>
      
        </div>
      </p-card>
      
  
      

      <!-- Steps de capacitaciones -->
      <p-card styleClass="mb-3 shadow-2 border-round-lg">
        <p-steps
          [model]="steps"
          [(activeIndex)]="activeIndex"
          [readonly]="false"
          class="w-full">
        </p-steps>
      </p-card>

      <!-- Panel de la capacitación seleccionada -->
      <p-card styleClass="shadow-2 border-round-lg">
        <ng-container *ngIf="sel as cap">
          <div class="flex align-items-start justify-content-between flex-wrap gap-3">
            <div class="flex flex-column gap-2">
              <h3 class="m-0">{{ cap.titulo }}</h3>

              <div class="flex gap-2">
                <p-tag [value]="cap.tipo" [severity]="tipoSeverity(cap.tipo)"></p-tag>
                <p-tag [value]="cap.estado" [severity]="estadoSeverity(cap.estado)"></p-tag>
                <p-tag
                  *ngIf="cap.duracionMinutos"
                  [value]="(cap.duracionMinutos) + ' min'"
                  severity="secondary">
                </p-tag>
                <p-tag [value]="'#' + cap.orden" severity="contrast"></p-tag>
              </div>
            </div>

            <div class="flex align-items-center gap-2">
              <p-button
              *ngIf="cap.estado !== 'COMPLETADO'"
                [label]="cap.estado === 'EN PROGRESO' ? 'Rever' : cap.iniciado ? 'Continuar' : 'Iniciar'"
                [icon]="cap.estado === 'EN PROGRESO' ? 'pi pi-refresh' : cap.iniciado ? 'pi pi-play' : 'pi pi-arrow-right'"
                severity="success"
                (onClick)="reproducir()"
                [loading]="loading()"
              ></p-button>
            </div>
          </div>

          <p-divider></p-divider>

          <p class="text-700 line-height-3" *ngIf="cap.descripcion; else sinDesc">
            {{ cap.descripcion }}
          </p>
          <ng-template #sinDesc>
            <p class="text-500">Sin descripción.</p>
          </ng-template>
        </ng-container>

        <ng-container *ngIf="!sel">
          <p class="text-500">No hay capacitaciones disponibles.</p>
        </ng-container>
      </p-card>

    </div>
  </div>
</div>
